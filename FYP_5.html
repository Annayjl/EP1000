<!DOCTYPE html>
<html lang="en">
<head>
<title>Anna's Website</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/style.css" />
<head>
</head>
<body>



<header>
  <h2>WIRING & CODING</h2>
</header>
<div class="topnav">
    <a  href="index.html">Home</a>
    <div class="dropdown">
    <button class="dropbtn">Topics
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="topic_1.html">FABLAB SAFETY AND PROJECT MANAGEMENT</a>
    <a href="topic_4.html">CREATE AND VIEW A WEB PAGE ON YOUR COMPUTER</a>
    <a href="topic_5.html">SET UP GIT</a>
    <a href="topic_2.html">GIMP</a>
    <a href="topic_3.html">FUSION 360</a>
    </div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">FYP
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="FYP_1.html">DRAFT & SKETCH</a>
    <a href="FYP_2.html">RESEARCH & ADJUSTMENT</a>
    <a href="FYP_3.html">LASER CUTTING</a>
    <a href="FYP_4.html">3D PRINTING</a>
    <a href="FYP_5.html">WIRING & CODING</a>
    </div>
  </div>
  <a  href="Presentation.html">FINAL</a>
</div>

      
              <h1 >WIRING</h1>
              <p> 
                  You will need a Rotary Encoder and Digispark.
              </p>
              <br> <img src="Image/components.PNG">

              <br>
              <p>
                You will also need 4 female to female wires in order for it to work.
              There will be a picture below for reference.
              </p>
              <br> 
              <img src="Image/wire.jpg">
              <br>
              <p>
               After wiring, we will proceed with the coding in order for the thing to work.
              </p>
              <h1 >CODING</h1>
              <p>
                I did not have a hard time understanding the codes because I am currently studying in Information Technology.
                <br> Those who have no coding background, no worries. 
                <br> Code will be given below, check it out!
               </p>
               <br>
                
               <a href="https://learn.adafruit.com/trinket-usb-volume-knob/code" >USB Volume knob(Code)</a>
               <pre> 
                   <ol>
                       <li ><span >#include</span><span class="pln"></span><span class="str">"TrinketHidCombo.h"</span>
                        </li>
                        <li ><span >#define</span><span class="pln"></span><span class="str">"PIN_ENCODER_A 0"</span>
                        </li>
                        <li ><span >#define</span><span class="pln"></span><span class="str">"PIN_ENCODER_B 2"</span>
                        </li>
                        <li ><span >#define</span><span class="pln"></span><span class="str">"TRINKET_PINx  PINB"</span>
                        </li>
                            <li class="L6"><span class="kwd">static</span><span class="pln"> </span><span class="typ">uint8_t</span><span class="pln"> enc_prev_pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="kwd">static</span><span class="pln"> </span><span class="typ">uint8_t</span><span class="pln"> enc_flags    </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> setup</span><span class="pun">()</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">  </span><span class="com">// set pins as input with internal pull-up resistors enabled</span></li><li class="L2"><span class="pln">  pinMode</span><span class="pun">(</span><span class="pln">PIN_ENCODER_A</span><span class="pun">,</span><span class="pln"> INPUT</span><span class="pun">);</span></li><li class="L3"><span class="pln">  pinMode</span><span class="pun">(</span><span class="pln">PIN_ENCODER_B</span><span class="pun">,</span><span class="pln"> INPUT</span><span class="pun">);</span></li><li class="L4"><span class="pln">  digitalWrite</span><span class="pun">(</span><span class="pln">PIN_ENCODER_A</span><span class="pun">,</span><span class="pln"> HIGH</span><span class="pun">);</span></li><li class="L5"><span class="pln">  digitalWrite</span><span class="pun">(</span><span class="pln">PIN_ENCODER_B</span><span class="pun">,</span><span class="pln"> HIGH</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  </span><span class="typ">TrinketHidCombo</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">();</span><span class="pln"> </span><span class="com">// start the USB device engine and enumerate</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">  </span><span class="com">// get an initial reading on the encoder pins</span></li><li class="L0"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">digitalRead</span><span class="pun">(</span><span class="pln">PIN_ENCODER_A</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> LOW</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    enc_prev_pos </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L2"><span class="pln">  </span><span class="pun">}</span></li><li class="L3"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">digitalRead</span><span class="pun">(</span><span class="pln">PIN_ENCODER_B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> LOW</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">    enc_prev_pos </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">  </span><span class="pun">}</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> loop</span><span class="pun">()</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">  </span><span class="typ">int8_t</span><span class="pln"> enc_action </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 1 or -1 if moved, sign is direction</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">  </span><span class="com">// note: for better performance, the code will now use</span></li><li class="L3"><span class="pln">  </span><span class="com">// direct port access techniques</span></li><li class="L4"><span class="pln">  </span><span class="com">// http://www.arduino.cc/en/Reference/PortManipulation</span></li><li class="L5"><span class="pln">  </span><span class="typ">uint8_t</span><span class="pln"> enc_cur_pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L6"><span class="pln">  </span><span class="com">// read in the encoder state first</span></li><li class="L7"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_clear</span><span class="pun">(</span><span class="pln">TRINKET_PINx</span><span class="pun">,</span><span class="pln"> PIN_ENCODER_A</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">    enc_cur_pos </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L9"><span class="pln">  </span><span class="pun">}</span></li><li class="L0"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_clear</span><span class="pun">(</span><span class="pln">TRINKET_PINx</span><span class="pun">,</span><span class="pln"> PIN_ENCODER_B</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    enc_cur_pos </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L2"><span class="pln">  </span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">  </span><span class="com">// if any rotation at all</span></li><li class="L5"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_cur_pos </span><span class="pun">!=</span><span class="pln"> enc_prev_pos</span><span class="pun">)</span></li><li class="L6"><span class="pln">  </span><span class="pun">{</span></li><li class="L7"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_prev_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x00</span><span class="pun">)</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">      </span><span class="com">// this is the first edge</span></li><li class="L0"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_cur_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x01</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">        enc_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L2"><span class="pln">      </span><span class="pun">}</span></li><li class="L3"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_cur_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">        enc_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">      </span><span class="pun">}</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_cur_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x03</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="pun">{</span></li><li class="L0"><span class="pln">      </span><span class="com">// this is when the encoder is in the middle of a "step"</span></li><li class="L1"><span class="pln">      enc_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">);</span></li><li class="L2"><span class="pln">    </span>
                            <span class="pun">}</span></li><li class="L3"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_cur_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x00</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">      </span><span class="com">// this is the final edge</span></li><li class="L6"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_prev_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">        enc_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">);</span></li><li class="L8"><span class="pln">      </span><span class="pun">}</span></li><li class="L9"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_prev_pos </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x01</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">        enc_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">);</span></li><li class="L1"><span class="pln">      </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">      </span><span class="com">// check the first and last edge</span></li><li class="L4"><span class="pln">      </span><span class="com">// or maybe one edge is missing, if missing then require the middle state</span></li><li class="L5"><span class="pln">      </span><span class="com">// this will reject bounces and false movements</span></li><li class="L6"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">        enc_action </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L8"><span class="pln">      </span><span class="pun">}</span></li><li class="L9"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">        enc_action </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L1"><span class="pln">      </span><span class="pun">}</span></li><li class="L2"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">        enc_action </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L4"><span class="pln">      </span><span class="pun">}</span></li><li class="L5"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> bit_is_set</span><span class="pun">(</span><span class="pln">enc_flags</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">        enc_action </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L7"><span class="pln">      </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">      enc_flags </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// reset for next time</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pln">  </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  enc_prev_pos </span><span class="pun">=</span><span class="pln"> enc_cur_pos</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_action </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">    </span><span class="typ">TrinketHidCombo</span><span class="pun">.</span><span class="pln">pressMultimediaKey</span><span class="pun">(</span><span class="pln">MMKEY_VOL_UP</span><span class="pun">);</span></li><li class="L7"><span class="pln">  </span><span class="pun">}</span></li><li class="L8"><span class="pln">  </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_action </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L9"><span class="pln">    </span><span class="typ">TrinketHidCombo</span><span class="pun">.</span><span class="pln">pressMultimediaKey</span><span class="pun">(</span><span class="pln">MMKEY_VOL_DOWN</span><span class="pun">);</span></li><li class="L0"><span class="pln">  </span><span class="pun">}</span></li><li class="L1"><span class="pln">  </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    </span><span class="typ">TrinketHidCombo</span><span class="pun">.</span><span class="pln">poll</span><span class="pun">();</span><span class="pln"> </span><span class="com">// do nothing, check if USB needs anything done</span></li><li class="L3"><span class="pln">  </span><span class="pun">}</span></li><li class="L4"><span class="pun">}
                            </span></li></ol></pre>
               
               <br>
              
                
            


                
<br>
<footer>
 <p></p>
</footer>

</body>
</html>
